<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In - Billings</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!--
        LOGIN PAGE - User Authentication

        Purpose: Authenticate existing users and get JWT token

        What you'll learn here:
        - Authentication flow (credentials ‚Üí token ‚Üí storage)
        - Making POST requests with credentials
        - Handling 401 Unauthorized errors
        - Storing JWT tokens securely
        - Redirecting after successful login
    -->

    <div class="container">
        <div class="form-container">
            <div class="form-header">
                <h1>üîê Log In</h1>
                <p>Access your account</p>
            </div>

            <!--
                LOGIN FORM

                Simpler than signup - only email and password needed
            -->
            <form id="login-form" class="form">
                <!-- Email Input -->
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        required
                        placeholder="you@example.com"
                        autocomplete="email"
                    >
                </div>

                <!-- Password Input -->
                <div class="form-group">
                    <label for="password">Password</label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        required
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        autocomplete="current-password"
                    >
                    <small style="display: block; margin-top: 5px;">
                        <a href="request-reset.html">Forgot password?</a>
                    </small>
                </div>

                <!--
                    ERROR MESSAGE AREA

                    Common login errors:
                    - 401 Unauthorized: Invalid email/password
                    - 400 Bad Request: Validation error
                    - 500 Server Error: Backend issue
                    - Network error: Backend not running
                -->
                <div id="error-message" class="error-message" style="display: none;"></div>

                <!--
                    SUCCESS MESSAGE AREA

                    Briefly shown before redirecting to dashboard
                -->
                <div id="success-message" class="success-message" style="display: none;"></div>

                <!-- Submit Button -->
                <button type="submit" class="button button-primary button-full">
                    Log In
                </button>

                <!--
                    LOADING INDICATOR

                    Shows while waiting for authentication response
                -->
                <div id="loading" style="display: none; text-align: center; margin-top: 10px;">
                    <p>Authenticating...</p>
                </div>
            </form>

            <!-- Link to Signup Page -->
            <div class="form-footer">
                <p>Don't have an account? <a href="signup.html">Sign up</a></p>
                <p><a href="index.html">‚Üê Back to home</a></p>
            </div>

            <!-- API Documentation Link -->
            <div class="api-info">
                <details>
                    <summary>API Details (for learning)</summary>
                    <div class="code-block">
                        <strong>Endpoint:</strong> POST /api/v1/auth/login<br>
                        <strong>Request Body:</strong><br>
                        <code>
                            {<br>
                            &nbsp;&nbsp;"email": "user@example.com",<br>
                            &nbsp;&nbsp;"password": "password123"<br>
                            }
                        </code><br><br>
                        <strong>Response (Success):</strong><br>
                        <code>
                            {<br>
                            &nbsp;&nbsp;"access_token": "eyJhbG...",<br>
                            &nbsp;&nbsp;"token_type": "bearer"<br>
                            }
                        </code><br><br>
                        <strong>Response (Error - 401):</strong><br>
                        <code>
                            {<br>
                            &nbsp;&nbsp;"detail": "Invalid email or password"<br>
                            }
                        </code>
                    </div>
                </details>
            </div>

            <!-- Security Note for Learning -->
            <div class="security-note">
                <strong>üîí Security Note (Learning):</strong>
                <ul>
                    <li>Password is sent over HTTPS in production (encrypted in transit)</li>
                    <li>Backend never stores plain text passwords (uses bcrypt hashing)</li>
                    <li>JWT token is stored in localStorage (accessible only to this domain)</li>
                    <li>Token expires after 15 minutes (configurable in backend)</li>
                </ul>
            </div>
        </div>
    </div>

    <!--
        JAVASCRIPT MODULE

        The actual login logic is in js/login.js
    -->
    <script type="module" src="js/login.js"></script>
</body>
</html>
